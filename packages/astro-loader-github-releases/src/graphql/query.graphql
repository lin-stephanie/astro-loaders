# https://docs.github.com/en/graphql/reference/objects#release
fragment ReleaseCore on Release {
  id
  url
  name
  tagName
  description
  descriptionHTML
  isDraft
  isLatest
  isPrerelease
  repository {
    name
    nameWithOwner
    url
    stargazerCount
    isInOrganization
  }
  createdAt
  publishedAt
}

# https://docs.github.com/en/graphql/reference/queries#repository
query GetReleases(
  $owner: String!
  $repo: String!
  $first: Int!
  $cursor: String
) {
  repository(owner: $owner, name: $repo) {
    releases(first: $first, after: $cursor) {
      nodes {
        ...ReleaseCore
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

# https://docs.github.com/en/graphql/reference/queries#repository
query GetReleaseByTagName($owner: String!, $repo: String!, $tagName: String!) {
  repository(owner: $owner, name: $repo) {
    release(tagName: $tagName) {
      ...ReleaseCore
    }
  }
}

# https://docs.github.com/en/graphql/reference/queries#node
query GetReleaseById($id: ID!) {
  node(id: $id) {
    ...ReleaseCore
  }
}
